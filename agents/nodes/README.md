# –ù–æ–¥—ã –≥—Ä–∞—Ñ–∞
–ó–¥–µ—Å—å —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ –Ω–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤ [—Ü–µ–ø–æ—á–∫–∞—Ö](../chains/)

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
nodes/\
‚îú‚îÄ‚îÄ [`base.py`](base.py) -- –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–∏—Ö –Ω–æ–¥ \
‚îú‚îÄ‚îÄ [`critique.py`](critique.py) -- –ù–æ–¥–∞ –∫—Ä–∏—Ç–∏–∫–∞ (—Ö–æ—Ç—è, —Å–∫–æ—Ä–µ–µ, –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞) –ø–æ–ª–Ω–æ—Ç—ã –æ—Ç–≤–µ—Ç–∞ \
‚îú‚îÄ‚îÄ [`extract_conversation_style.py`](extract_conversation_style.py) -- –ù–æ–¥–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç–∏–ª—è –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º \
‚îú‚îÄ‚îÄ [`extract_faq.py`](extract_faq.py) -- –ù–æ–¥–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —á–∞—Å—Ç–æ-–∑–∞–¥–∞–≤–∞–µ–º—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è \
‚îú‚îÄ‚îÄ [`finalize.py`](finalize.py) -- –°–æ–±–∏—Ä–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–µ–¥–∏–Ω–æ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –ø—Ä–∏–º–µ–Ω—è—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –º–∞–Ω–µ—Ä—É –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º \
‚îú‚îÄ‚îÄ [`first_step.py`](first_step.py) -- –ù–æ–¥–∞, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è, –Ω—É–∂–µ–Ω –ª–∏ –≤–æ–æ–±—â–µ –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–ª–∏ –º–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å —Å—Ä–∞–∑—É \
‚îú‚îÄ‚îÄ [`get_memory_faq.py`](get_memory_faq.py) -- –ù–æ–¥–∞, –¥–æ—Å—Ç–∞—é—â–∞—è –∏–∑ –ø–∞–º—è—Ç–∏ –≤–æ–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∑–∞–¥–∞–≤–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å \
‚îú‚îÄ‚îÄ [`get_memory_manner.py`](get_memory_manner.py) -- –ù–æ–¥–∞, –¥–æ—Å—Ç–∞—é—â–∞—è –∏–∑ –ø–∞–º—è—Ç–∏ –º–∞–Ω–µ—Ä—É –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º  \
‚îú‚îÄ‚îÄ [`question_decomposition.py`](question_decomposition.py) -- –†–∞–∑–±–∏–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –ø–æ–¥–≤–æ–ø—Ä–æ—Å—ã \
‚îú‚îÄ‚îÄ [`rag.py`](rag.py) -- –ù–æ–¥–∞ –ø–æ–∏—Å–∫–∞ –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –±–∞–∑–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ \
‚îú‚îÄ‚îÄ [`reason.py`](reason.py) -- –ù–æ–¥–∞, —Ä–µ—à–∞—é—â–∞—è, –∫–∞–∫–∏–µ —à–∞–≥–∏ —Å—Ç–æ–∏—Ç –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—å –¥–ª—è –Ω–∞–∏–ª—É—á—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞ \
‚îú‚îÄ‚îÄ [`search.py`](search.py) -- –ù–æ–¥–∞ –ø–æ–∏—Å–∫–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ \
‚îú‚îÄ‚îÄ [`store_question.py`](store_question.py) -- –ù–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞ –≤ –ë–î \
‚îú‚îÄ‚îÄ [`write.py`](write.py) -- –ù–æ–¥–∞, –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä—É—é—â–∞—è WEB- –∏ RAG-–ø–æ–∏—Å–∫ –≤ —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç \
‚îú‚îÄ‚îÄ [`write_faq.py`](write_faq.py) -- ??? \
‚îî‚îÄ‚îÄ [`write_manner_to_memory.py`](write_manner_to_memory.py) -- –ù–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞–Ω–µ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î  

## üß© –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [`base.py`](base.py) -- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Å–≤–æ–∏ –Ω–æ–¥—ã. –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å `BaseNode`. 
- [`question_decomposition.py`](question_decomposition.py) -- –ü–µ—Ä–≤–∏—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤–æ–ø—Ä–æ—Å–∞. –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å `QuestionDecompositionNode`.
- [`first_step.py`](first_step.py) -- –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç–≤–µ—Ç–∞. –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å `FirstStepNode`. 
- [`finalize.py`](finalize.py) -- –†–µ–∑—é–º–µ –≤—Å–µ—Ö —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π. –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å `FinalizeNode`. 


## üé® –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–π –Ω–æ–¥—ã
```python
#agents/nodes/new_node.py

from langgraph.types import Command
from langchain.prompts import ChatPromptTemplate
from langchain_core.output_parsers import PydanticOutputParser
from agents.nodes.base import BaseNode
from agents.state_management import GlobalState, NodeNames
from agents.state_management import CritiqueDecisionModel

from models import MistralLargeModel as model
from models.config import MistralLargeAPIConfig as model_config

from agents.prompts.base import PromptManager
from agents.edges.conditions import ConditionHandler

#ctrl + f –∏ –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ 'New' –Ω–∞ –Ω—É–∂–Ω–æ–µ –∏–º—è
class NewNode(BaseNode):
    def __init__(self):
        super().__init__(name=NodeNames.New.value)
        # –ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, —Ç–æ self.parser = StrOutputParser()
        self.parser = PydanticOutputParser(pydantic_object=NewModel)
        self.prompt_manager = PromptManager()
        self.prompt_template = "system/New.j2"
        self.model = model(config=model_config())

    def execute(self, state: GlobalState) -> Command:
        prompt = self.prompt_manager.create_chat_raw_prompt(self.prompt_template)
        chain = prompt | self.model | self.parser

        result = chain.invoke({})

        return Command(
            update={},
            # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ –¥–∞–Ω–Ω–æ–π –Ω–æ–¥–µ –µ—Å—Ç—å –≤–µ—Ç–≤–ª–µ–Ω–∏–µ
            goto=ConditionHandler.evaluate_transition(source_node=self.name, result=result),
        )

```
## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```python
#agents/chains/some_chain.py

from .base import BaseChain
from typing import List
from agents import nodes


class SomeChain(BaseChain):
    """–¶–µ–ø–æ—á–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å –Ω–æ–≤–æ–π –Ω–æ–¥–æ–π"""

    def __init__(self):
        super().__init__()

        #–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫ –Ω–æ–¥
        node_list: List[nodes.BaseNode] = [
            nodes.NewNode,
            ...
        ]

        # –ù–µ –∑–∞–±—ã—Ç—å –¥–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å
        edge_list = [
            (nodes.NewNode, nodes.SomeNode),
            ...
        ]

        ...
```
–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º–æ—Ç—Ä–∏ –≤ [—Ü–µ–ø–æ—á–∫–∞—Ö](../chains/README.md#-—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–≤–æ–µ–π-—Ü–µ–ø–æ—á–∫–∏)

## üìã –ß–µ–∫–ª–∏—Å—Ç—ã

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –Ω–æ–¥—ã:**
- [ ] –ó–∞—Ä–µ–≥–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–º—è –Ω–æ–¥—ã –≤ [`NodeNames`](../state_management/commands.py) 
  - [ ] –ó–∞–Ω–µ—Å—Ç–∏ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–¥—ã –≤ `NodesMeta`
- [ ] (–æ–ø—Ü.) –°–æ–∑–¥–∞—Ç—å [–≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—É—é –º–æ–¥–µ–ª—å](../state_management/validation_models/README.md#-—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–≤–æ–µ–π-–º–æ–¥–µ–ª–∏)
- [ ] –°–æ–∑–¥–∞—Ç—å [–ø—Ä–æ–º–ø—Ç](../prompts/README.md#-—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–≤–æ–µ–≥–æ-–ø—Ä–æ–º–ø—Ç–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –Ω–æ–¥—ã –≤ –ø–∞–ø–∫–µ [nodes](../nodes/)
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `def __init__()` –∏–º—è —Å–æ–∑–¥–∞–Ω–Ω–æ–π –Ω–æ–¥—ã
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `def __init__()` —Å–æ–∑–¥–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `def __init__()` –ø—É—Ç—å –¥–æ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–¥—É –≤ [`__init__.py`](__init__.py)

**–£–¥–∞–ª–µ–Ω–∏–µ: TODO**
- [ ] 
- [ ]

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

```bash

```
_–ü—Ä–∏—á–∏–Ω–∞:_

_–†–µ—à–µ–Ω–∏–µ:_
- [ ]
- [ ]
---

```bash

```
_–ü—Ä–∏—á–∏–Ω–∞:_

_–†–µ—à–µ–Ω–∏–µ:_
- [ ]
- [ ]
---
