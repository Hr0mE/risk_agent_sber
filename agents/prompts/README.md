# –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –Ω–æ–¥
–í —ç—Ç–æ–π –ø–∞–ø–∫–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –Ω–æ–¥. –û–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–¥ –ª–µ–∂–∞—Ç –≤ –ø–∞–ø–∫–µ `./system/`. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -- `.j2` –≤ —Å–∏–ª—É –º–æ—â–∏ jinja-—à–∞–±–ª–æ–Ω–æ–≤

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
prompts/\
‚îú‚îÄ‚îÄ [`system/`](system/) -- –•—Ä–∞–Ω–∏–ª–∏—â–µ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤.\
‚îî‚îÄ‚îÄ [`base.py`](base.py) -- –§–∞–±—Ä–∏–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤.

## üß© –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [`base.py`](base.py) -- –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å `PromptManager`.

## üé® –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
```jinja
#agents/prompts/system/new_prompt.j2
{% extends "./system/agent_identity.j2" %} # —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

{% block content %}

–î—É–º–∞–π –∫–∞–∫ –∞–≥–µ–Ω—Ç-*–†–û–õ–¨ –ê–ì–ï–ù–¢–ê*.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - *–ó–ê–î–ê–ß–ê –ê–ì–ï–ù–¢–ê*

–í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - {user_question} # –ü–æ–ª–µ –∏–∑ state, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å –Ω–æ–¥–æ–π

–¢–≤–æ–∏ –º—ã—Å–ª–∏ –ø–æ –ø–æ–≤–æ–¥—É –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
<THINK>
{last_reason} # –ü–æ–ª–µ –∏–∑ state, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å –Ω–æ–¥–æ–π
</THINK>

–í—ã–≤–µ–¥–∏ —Ç–æ–ª—å–∫–æ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
{format_instructions} # –í–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∑–∞—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è —Å—é–¥–∞

{% endblock %}
```
## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```python
#agents/nodes/some_node.py

class SomeNode(BaseNode):
    def __init__(self):
        ...
        self.prompt_template = "system/new_prompt.j2"

    def execute(self):
        ...

```

## üìã –ß–µ–∫–ª–∏—Å—Ç—ã

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞:**
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ state, –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–π –∫ –Ω–æ–¥–µ, —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è (`field`, –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞)
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–º–ø—Ç, —Ä–∞—Å—à–∏—Ä–∏–≤ –±–∞–∑–æ–≤—ã–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ `{% extends "./system/agent_identity.j2" %}`
- [ ] __(!)__ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—è –∏–∑ state –∏ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ `{field}` (!) –ù–ï –ß–ï–†–ï–ó `{{ smth }}`, –ø–æ—Ç–æ–º—É —á—Ç–æ –ª–æ–º–∞–µ—Ç—Å—è((
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ –∫–æ–¥–µ –Ω–æ–¥—ã `PromptManager` —Å–æ–±–∏—Ä–∞–µ—Ç —à–∞–±–ª–æ–Ω –≤ –ø—Ä–æ–º–ø—Ç.
- [ ] –í –∫–æ–¥–µ –Ω–æ–¥—ã –≤—ã–∑–≤–∞—Ç—å `chain.invoke({"field": somevalue})`

**–£–¥–∞–ª–µ–Ω–∏–µ: TODO**
- [ ]
- [ ]

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

```bash

```
_–ü—Ä–∏—á–∏–Ω–∞:_

_–†–µ—à–µ–Ω–∏–µ:_
- [ ]
- [ ]
---

```bash

```
_–ü—Ä–∏—á–∏–Ω–∞:_

_–†–µ—à–µ–Ω–∏–µ:_
- [ ]
- [ ]
---
